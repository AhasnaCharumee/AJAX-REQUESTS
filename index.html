<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ajax requests</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            font-family: Arial, sans-serif;
        }
        h1 {
            text-align: center;
            margin-top: 20px;
        }
        h2 {
            text-align: center;
            margin-top: 20px;
            color: #007bff;
        }
        table {
            width: 80%;
            margin: 20px auto;
            border-collapse: collapse;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #007bff;
            color: white;
        }
    </style>
</head>
<body>
<h1>Ajax GDSE 72</h1>
<button id="ajax-btn">send ajax request</button>
<h2></h2>
<table id="table" >
  <thead>
      <tr>
          <th>Name</th>
          <th>Address</th>
          <th>Address-2</th>
          <th>Phone</th>
          <th>Message</th>
      </tr>
  </thead>
  <tbody id="table-body">
  </tbody>
</table>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script>
  //   console.log("request started");
  //   var http = new XMLHttpRequest();
  //   console.log(http.readyState,"after object  created");
  //   http.open('GET', 'db.txt',false); // request purpose and location
  //   console.log(http.readyState,"after open method invoked");
  //   console.log(http.responseText); // 0
  //   console.log(http.readyState,"after response text printed");
  //   http.send();
  //   http.onreadystatechange=function (){
  //     console.log(http.readyState,"after onreadystatechange method invoked");
  //     $("h2").append(http.responseText);
  //     if (http.readyState == 4 && http.status == 200) {
  //       // console.log(http.responseText);
  //       $("h2").text(http.responseText);
  //       appendData(http);
  //     } else if (http.status == 404) {
  //       console.log("file not found");
  //     } else if (http.status == 500) {
  //       console.log("server error");
  //     } else if (http.status == 403) {
  //       console.log("access denied");
  //     } else if (http.status == 0) {
  //       console.log("network error");
  //     }


  //   }
  //   function appendData(http) {
  //     // console.log(http.responseText);
  //   }
  //   console.log(http.readyState,"after send method invoked");
  //   console.log("request finished");
//ajax object creation
//   $.ajax({
//   url: 'database.json',
//   type: 'GET',
//   success: function(response) {
//     console.log('Response:', response);
//     $('h2').text(response);
//   },
//   error:function(error){
//     console.log("error",error);
//   }
// });

//   $.ajax({
//     url: 'database.json',
//     type: 'GET',
//     dataType: 'json',
//     success: function(data) {



   $("#ajax-btn").click(function() {
       $.ajax({
           url: 'database.json',
           type: 'GET',
           dataType: 'json',
           success: function(data) {
               $('#table-body').empty();

               data.forEach(function(item) {
                   let row = `
                       <tr>
                           <td>${item.name}</td>
                           <td>${item.address[0].street}, ${item.address[0].city}, ${item.address[0].state}</td>
                           <td>${item.address[1].street}, ${item.address[1].city}, ${item.address[1].state}</td>
                           <td>${item.mobile}</td>
                           <td>${item.massage}</td>
                       </tr>
                   `;
                   $('#table-body').append(row);
               });
           },
           error: function(error) {
               console.log("Error:", error);
           }
       });
   });

 
</script>
</body>
</html>